<!DOCTYPE html>
<html>
    <head>
        <title>Projects</title>
        <link rel="stylesheet" type="text/css" href="../../styles.css">
    </head>
    <body>
        <div id="header">
            <h1>Welcome to My Projects page!</h1>
            <h2>This is where I put anything I make, big or absolutely useless</h2>
        </div>
        <h5>Be warned: terrible code ahead</h5>
        <h2 style="margin-top: 175px;">Bigger projects</h2>
        <div id = "bigger-projects" class = "grid">
            
        </div>
        <h2>Smaller projects</h2>
        <div id = "smaller-projects" class = "grid">

        </div>
        <h2>Games</h2>
        <div id = "games" class = "grid">

        </div>
    </body>
</html>

<style>
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 10px;
    }

    .projectContainer{
        border: 2px solid #488286;
        border-radius: 15px;
        width: 250px;
        height: 250px;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        fetch('projects.json')
        .then(response => {
            if (!response.ok) {
            throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(projects => {
            console.log('Loaded projects:', projects);
            projects.forEach(project => {
                const title = project.name;
                const image = project.image;
                const url = project.url;
                const description = project.description;
                const container = "bigger-projects";
                createProjectDiv(title, image, url, description, container);
            });
        })
        .catch(error => {
            console.error('Error loading JSON:', error);
        });

        fetch('small-projects.json')
        .then(response => {
            if (!response.ok) {
            throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(projects => {
            console.log('Loaded projects:', projects);
            projects.forEach(project => {
                const title = project.name;
                const image = project.image;
                const url = project.url;
                const description = project.description;
                const container = "smaller-projects";
                createProjectDiv(title, image, url, description, container);
            });
        })
        .catch(error => {
            console.error('Error loading JSON:', error);
        });

        fetch('games.json')
        .then(response => {
            if (!response.ok) {
            throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(projects => {
            console.log('Loaded projects:', projects);
            projects.forEach(project => {
                const title = project.name;
                const image = project.image;
                const url = project.url;
                const description = project.description;
                const container = "games";
                createProjectDiv(title, image, url, description, container);
            });
        })
        .catch(error => {
            console.error('Error loading JSON:', error);
        });

        function createProjectDiv(title, image, url, description, containerName){
            console.log(title, image, url);
            const div = document.createElement("div");
            const header = document.createElement("h3");
            const text = document.createElement("p");
            const link = document.createElement("a");
            const projectImage = document.createElement("img");
            const container = document.getElementById(containerName);

            //style
            div.classList.add("projectContainer")

            //content
            
            header.textContent = title;

            text.textContent = description;
            text.style.fontSize = "15px";

            if(url != "none"){
                link.href = url;
                link.textContent = "View Project"
            }

            if(image != "none"){
                projectImage.src = image;
                projectImage.style.width = "150px"
            }

            //appending
            div.appendChild(header);
            div.appendChild(projectImage);
            div.appendChild(text);
            div.appendChild(link);
            
            container.appendChild(div);
        }
    })

</script>